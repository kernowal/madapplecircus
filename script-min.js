const sections=document.querySelectorAll(".section");function showSection(e){console.log(`Navigating to section: #${e}`),sections.forEach((e=>e.classList.add("hidden")));const t=document.getElementById(e);t?(t.classList.remove("hidden"),console.log(`Section #${e} shown`)):console.warn(`Section #${e} not found`),"home"!==e?document.getElementById("home").classList.add("hidden"):document.getElementById("home").classList.remove("hidden")}function closeSection(e){document.getElementById(e).classList.add("hidden"),hideForm(e+"-form"),showSection("home"),history.pushState(null,"","#home")}function handleSubmit(e){if(""!==document.getElementById(e+"-honeypot").value)return!1;const t=document.getElementById(e+"-btn");return t.disabled=!0,t.textContent="SUBMITTING...",!0}function handleContactSubmit(){const e=document.getElementById("contact-form"),t=document.getElementById("contact-honeypot").value;if(""!==t)return!1;const n=document.getElementById("contact-btn");n.disabled=!0,n.textContent="SUBMITTING...";const o=new FormData;return o.append("formType","contact"),o.append("name",e.querySelector("#contact-name").value),o.append("email",e.querySelector("#contact-email").value),o.append("message",e.querySelector("#contact-message").value),o.append("company",t),fetch("https://script.google.com/macros/s/AKfycbxxsAyFrKfDfSxWcTsGsaSO8ozHkZMUVkIsJqmnmqW0XciLhJTXEui6YtuX53MJIWCY/exec",{method:"POST",body:o}).then((e=>e.json())).then((t=>{t.success?(e.reset(),n.disabled=!1,n.textContent="SEND MESSAGE",closeSection("contact",!1),document.getElementById("thank-you-modal").classList.remove("hidden")):(alert("Submission failed. Please try again or contact us at madapplecircus@gmail.com."),n.disabled=!1,n.textContent="SEND MESSAGE")})).catch((e=>{alert("An error occurred. Please try again or contact us at madapplecircus@gmail.com."),n.disabled=!1,n.textContent="SEND MESSAGE",console.error(e)})),!1}document.addEventListener("DOMContentLoaded",(()=>{console.log("Script loaded and DOM fully parsed");document.querySelectorAll(".nav-btn").forEach((e=>{e.addEventListener("click",(t=>{const n=e.getAttribute("href");if(!n.startsWith("#"))return;t.preventDefault();const o=n.substring(1);showSection(o),history.pushState(null,"",`#${o}`)}))})),window.addEventListener("popstate",(()=>{const e=window.location.hash.substring(1)||"home";console.log("Back/forward navigation detected:",e),showSection(e)}));const e=window.location.hash.substring(1);e?(console.log("Page loaded with hash:",e),showSection(e)):(console.log("Page loaded without hash; showing home"),showSection("home"))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("bg-audio");e&&e.paused&&e.play().catch((()=>{console.log("Autoplay blocked â€” user must interact")}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#contact form");e.addEventListener("submit",(function(t){t.preventDefault();const n=new FormData(e);fetch(e.action,{method:e.method,body:n,headers:{Accept:"application/json"}}).then((t=>{t.ok?(e.reset(),closeSection("contact",!1),document.getElementById("thank-you-modal").classList.remove("hidden")):alert("Something went wrong. Please try again later.")}))}))})),document.getElementById("signup_hidden_iframe").addEventListener("load",(function(){const e=document.getElementById("mailing-list-form"),t=e.querySelector("#signup-name").value,n=e.querySelector("#signup-email").value;if(""!==t&&""!=n){e.reset();const t=e.querySelector("button[type='submit']");t.disabled=!1,t.textContent="SUBSCRIBE",closeSection("signup",!1),document.getElementById("signup-success-modal").classList.remove("hidden")}}));const burger=document.getElementById("burger");function hideForm(e){const t=document.getElementById(e),n=t.querySelector("form");n&&(n.reset(),[...n.elements].forEach((e=>e.disabled=!0))),t.style.display="none"}function showForm(e){const t=document.getElementById(e),n=t.querySelector("form");t.style.display="flex",[...n.elements].forEach((e=>e.disabled=!1))}burger.addEventListener("click",(()=>{const e=document.getElementById("sidenav"),t=document.getElementById("mac-logo"),n=e.classList.toggle("open");burger.classList.toggle("open",n),t.classList.toggle("nav-open",n),burger.setAttribute("aria-expanded",n)}));